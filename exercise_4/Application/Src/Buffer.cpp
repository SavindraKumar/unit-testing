//!
//! \file   Buffer.cpp
//!
//! \brief  Class implementation for run time memory allocation class
//!

//////////////////////////////////////////////////////////////////////
// Copyright (c) 2025  Created by Savindra Kumar
//////////////////////////////////////////////////////////////////////



//---------------------------------------------------------------------------
// Includes
//---------------------------------------------------------------------------
//user defined includes
#include "Buffer.hpp"
#include <cstdlib>


namespace App {


//---------------------------------------------------------------------------
// public methods
//---------------------------------------------------------------------------
Buffer::Buffer() : buffer(nullptr), size(0)
{

}

//---------------------------------------------------------------------------
Buffer::~Buffer()
{
    // BUG: forgot to free(buffer);  <-- intentional for testing
}

//---------------------------------------------------------------------------
void Buffer::allocate(size_t sz)
{
    buffer = (char*)malloc(sz);
    size = sz;
}

//---------------------------------------------------------------------------
void Buffer::release()
{
    free(buffer);
    buffer = nullptr;
    size = 0;
}

//---------------------------------------------------------------------------
char* Buffer::getBuffer()
{
    return buffer;
}

//---------------------------------------------------------------------------
// Private methods
//---------------------------------------------------------------------------



} //namespace App
//---------------------------------------------------------------------------
// End of File
//---------------------------------------------------------------------------
